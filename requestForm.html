<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="style3.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    
</head>

<body>
    <div class="container px-4 py-5 mx-auto">
        <div class="card card0">
            <div class="d-flex flex-lg-row flex-column-reverse">
                <div class="card card1">
                    <div class="row justify-content-center my-auto">
                        <div class="col-md-8 col-10 my-5">
                            <form action="request.php" method="post">
                            <!-- <div class="row justify-content-center px-3 mb-3">
                                <img id="logo" src="https://i.imgur.com/PSXxjNY.png">
                            </div>
                            <h3 class="mb-5 text-center heading">We are Tidi</h3> -->
                            <div class="form-group">
                                <label class="form-control-label text-muted">Title</label>
                                <select id="title" name="title" class="form-control" required>
                                    <option value="">Select Title</option>
                                    <option value="mr">Mr.</option>
                                    <option value="mrs">Mrs.</option>
                                    <option value="ms">Ms.</option>
                                    <option value="dr">Dr.</option>
                                    <option value="prof">Prof.</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group" id="customTitleGroup" style="display: none;">
                                <label class="form-control-label text-muted">Custom Title</label>
                                <input type="text" id="customTitle" name="customTitle" class="form-control">
                            </div>


                            <div class="form-group">
                                <label class="form-control-label text-muted">Name</label>
                                <input type="text" id="name" name="Name" placeholder="Name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <div id="email-message" style="display: none; color: red;"></div>
                                <label class="form-control-label text-muted">Email</label>
                                <input type="text" id="email" name="email" placeholder="Email" class="form-control" required>
                                <div class="form-group">
                                    <label class="form-control-label text-muted">Company</label>
                                    <input type="text" id="company" name="company" placeholder="Your company name" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-control-label text-muted">Message</label>
                                <input type="text" id="message" name="message" placeholder="Your message here" class="form-control" class="form-control placeholder-opacity" required>
                            </div>

                            <div class="row justify-content-center my-3 px-3">
                                <button type="submit" class="btn-block btn-color">Request Access</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card card2">
                    <div class="my-auto mx-md-5 px-md-5 right">
                        <h3 class="text-white" style="font-size:  24px; font-weight: bold;">Why should I request access?</h3>
                        <small class="text-white" style="text-align: justify; font-size:  18px; font-weight: bold;">Hi, I'm Arunodya Pawuluarachchi. To access My Portfolio Website, I kindly request you to complete the Access Request Form with all the necessary details. Upon submission, you will receive an email containing your access password within an hour. This password, in combination with the email address you provided, will grant you access to the website. Please note that it may take up to an hour to receive the email with your access credentials. We appreciate your patience and thank you for your interest in My Portfolio Website.</small>
                    </div>                    
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="successModalLabel">Success</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="text-align: justify";>
            Your request for access has been successfully forwarded to Ms. Arunodya Pawuluarachchi. You can expect to receive your access password within the next hour. Please use that password to log in to the website, using your provided email address <span style="color: blue;" id="emailDisplay"></span> as the username. We appreciate your patience. Thank you for your interest.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    document.getElementById('title').addEventListener('change', function () {
        var customTitleGroup = document.getElementById('customTitleGroup');
        if (this.value === 'other') {
            customTitleGroup.style.display = 'block';
        } else {
            customTitleGroup.style.display = 'none';
        }
    });

    document.getElementById('email').addEventListener('blur', function () {
        var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
        var emailInput = this;
        var emailMessage = document.getElementById('email-message');

        if (!emailPattern.test(emailInput.value)) {
            emailInput.style.borderColor = 'red';
            emailMessage.style.display = 'block';
            emailMessage.textContent = 'Incorrect email format.';
        } else {
            emailInput.style.borderColor = '';
            emailMessage.style.display = 'none';
        }
    });

    // Get the form element
    var form = document.querySelector('form');

    // Add an event listener for the submit event
    form.addEventListener('submit', function(event) {
        // Prevent the form from submitting normally
        event.preventDefault();

        // Get the email input value
        var email = document.getElementById('email').value;

        // Show the modal
        $('#successModal').modal('show');

        // Populate the email address in the modal
        document.getElementById('emailDisplay').textContent = email;

        // Send the form data to the server using AJAX
        $.ajax({
            url: 'request.php',
            type: 'post',
            data: $(this).serialize(),
            success: function(response) {
                console.log(response);
            }
        });
    });
</script>

</body>

</html>